/**
 * @license jquery.panzoom.js v3.2.2
 * Updated: Sat Aug 27 2016
 * Add pan and zoom functionality to any element
 * Copyright (c) timmy willison
 * Released under the MIT license
 * https://github.com/timmywil/jquery.panzoom/blob/master/MIT-License.txt
 * 
 *
 * theJ : 2019-06-28 
 *        ASIS : self._startMove(e, touches); 
 *        TOBE : if(touches) self._startMove(e, touches);
 *
 */
 !function(e,n){"function"==typeof define&&define.amd?define(["jquery"],function(t){return n(e,t)}):"object"==typeof exports?n(e,require("jquery")):n(e,e.jQuery)}("undefined"!=typeof window?window:this,function(t,x){"use strict";var _=t.document,o="__pz__",a=Array.prototype.slice,e=/trident\/7./i,c=function(){if(e.test(navigator.userAgent))return!1;var t=_.createElement("input");return t.setAttribute("oninput","return"),"function"==typeof t.oninput}(),r=/([A-Z])/g,h=/^http:[\w\.\/]+svg$/,n="(\\-?\\d[\\d\\.e-]*)",t="\\,?\\s*",i=new RegExp("^matrix\\("+n+t+n+t+n+t+n+t+n+t+n+"\\)$");function s(t){var e={range:!0,animate:!0};return"boolean"==typeof t?e.animate=t:x.extend(e,t),e}function m(t,e,n,i,s,o,a,r,h){"array"===x.type(t)?this.elements=[+t[0],+t[2],+t[4],+t[1],+t[3],+t[5],0,0,1]:this.elements=[t,e,n,i,s,o,a||0,r||0,h||1]}function u(t,e,n){this.elements=[t,e,n]}function l(t,n){if(!(this instanceof l))return new l(t,n);1!==t.nodeType&&x.error("Panzoom called on non-Element node"),x.contains(_,t)||x.error("Panzoom element must be attached to the document");var e=x.data(t,o);if(e)return e;this.options=n=x.extend({},l.defaults,n),this.elem=t;e=this.$elem=x(t);this.$set=n.$set&&n.$set.length?n.$set:e,this.$doc=x(t.ownerDocument||_),this.$parent=e.parent(),this.parent=this.$parent[0],this.isSVG=h.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase(),this.panning=!1,this._buildTransform(),this._transform=x.cssProps.transform.replace(r,"-$1").toLowerCase(),this._buildTransition(),this.resetDimensions();var i=x(),s=this;x.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(t,e){s[e]=n[e]||i}),this.enable(),this.scale=this.getMatrix()[0],this._checkPanWhenZoomed(),x.data(t,o,this)}return m.prototype={x:function(t){var e=t instanceof u,n=this.elements,t=t.elements;return e&&3===t.length?new u(n[0]*t[0]+n[1]*t[1]+n[2]*t[2],n[3]*t[0]+n[4]*t[1]+n[5]*t[2],n[6]*t[0]+n[7]*t[1]+n[8]*t[2]):t.length===n.length&&new m(n[0]*t[0]+n[1]*t[3]+n[2]*t[6],n[0]*t[1]+n[1]*t[4]+n[2]*t[7],n[0]*t[2]+n[1]*t[5]+n[2]*t[8],n[3]*t[0]+n[4]*t[3]+n[5]*t[6],n[3]*t[1]+n[4]*t[4]+n[5]*t[7],n[3]*t[2]+n[4]*t[5]+n[5]*t[8],n[6]*t[0]+n[7]*t[3]+n[8]*t[6],n[6]*t[1]+n[7]*t[4]+n[8]*t[7],n[6]*t[2]+n[7]*t[5]+n[8]*t[8])},inverse:function(){var t=1/this.determinant(),e=this.elements;return new m(t*(e[8]*e[4]-e[7]*e[5]),t*-(e[8]*e[1]-e[7]*e[2]),t*(e[5]*e[1]-e[4]*e[2]),t*-(e[8]*e[3]-e[6]*e[5]),t*(e[8]*e[0]-e[6]*e[2]),t*-(e[5]*e[0]-e[3]*e[2]),t*(e[7]*e[3]-e[6]*e[4]),t*-(e[7]*e[0]-e[6]*e[1]),t*(e[4]*e[0]-e[3]*e[1]))},determinant:function(){var t=this.elements;return t[0]*(t[8]*t[4]-t[7]*t[5])-t[3]*(t[8]*t[1]-t[7]*t[2])+t[6]*(t[5]*t[1]-t[4]*t[2])}},u.prototype.e=m.prototype.e=function(t){return this.elements[t]},l.rmatrix=i,l.defaults={eventNamespace:".panzoom",transition:!0,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,which:1,increment:.3,exponential:!0,panOnlyWhenZoomed:!1,minScale:.3,maxScale:6,rangeStep:.05,duration:200,easing:"ease-in-out",contain:!1},l.prototype={constructor:l,instance:function(){return this},enable:function(){this._initStyle(),this._bind(),this.disabled=!1},disable:function(){this.disabled=!0,this._resetStyle(),this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),x.removeData(this.elem,o)},resetDimensions:function(){this.container=this.parent.getBoundingClientRect();var t=this.elem,e=t.getBoundingClientRect(),n=Math.abs(this.scale);this.dimensions={width:e.width,height:e.height,left:x.css(t,"left",!0)||0,top:x.css(t,"top",!0)||0,border:{top:x.css(t,"borderTopWidth",!0)*n||0,bottom:x.css(t,"borderBottomWidth",!0)*n||0,left:x.css(t,"borderLeftWidth",!0)*n||0,right:x.css(t,"borderRightWidth",!0)*n||0},margin:{top:x.css(t,"marginTop",!0)*n||0,left:x.css(t,"marginLeft",!0)*n||0}}},reset:function(t){t=s(t);var e=this.setMatrix(this._origTransform,t);t.silent||this._trigger("reset",e)},resetZoom:function(t){t=s(t);var e=this.getMatrix(this._origTransform);t.dValue=e[3],this.zoom(e[0],t)},resetPan:function(t){var e=this.getMatrix(this._origTransform);this.pan(e[4],e[5],s(t))},setTransform:function(t){for(var e=this.$set,n=e.length;n--;)x.style(e[n],"transform",t),this.isSVG&&e[n].setAttribute("transform",t)},getTransform:function(t){var e=this.$set[0];return t?this.setTransform(t):(t=x.style(e,"transform"),!this.isSVG||t&&"none"!==t||(t=x.attr(e,"transform")||"none")),"none"===t||i.test(t)||this.setTransform(t=x.css(e,"transform")),t||"none"},getMatrix:function(t){t=i.exec(t||this.getTransform());return t&&t.shift(),t||[1,0,0,1,0,0]},setMatrix:function(t,e){if(!this.disabled){e=e||{},"string"==typeof t&&(t=this.getMatrix(t));var n,i,s,o,a,r,h,c,l,m=+t[0],u=(void 0!==e.contain?e:this.options).contain;return u&&((n=e.dims)||(this.resetDimensions(),n=this.dimensions),h=this.container,o=n.width,a=n.height,r=(c=h.width)/o,h=(l=h.height)/a,"center"!==this.$parent.css("textAlign")||"inline"!==x.css(this.elem,"display")?(i=(s=(o-this.elem.offsetWidth)/2)-n.border.left,s=o-c-s+n.border.right):i=s=(o-c)/2,c=(a-l)/2+n.border.top,l=(a-l)/2-n.border.top-n.border.bottom,t[4]="invert"===u||"automatic"===u&&r<1.01?Math.max(Math.min(t[4],i-n.border.left),-s):Math.min(Math.max(t[4],i),-s),t[5]="invert"===u||"automatic"===u&&h<1.01?Math.max(Math.min(t[5],c-n.border.top),-l):Math.min(Math.max(t[5],c),-l)),"skip"!==e.animate&&this.transition(!e.animate),e.range&&this.$zoomRange.val(m),(this.options.disableXAxis||this.options.disableYAxis)&&(l=this.getMatrix(),this.options.disableXAxis&&(t[4]=l[4]),this.options.disableYAxis&&(t[5]=l[5])),this.setTransform("matrix("+t.join(",")+")"),this.scale=m,this._checkPanWhenZoomed(m),e.silent||this._trigger("change",t),t}},isPanning:function(){return this.panning},transition:function(t){if(this._transition)for(var e=t||!this.options.transition?"none":this._transition,n=this.$set,i=n.length;i--;)x.style(n[i],"transition")!==e&&x.style(n[i],"transition",e)},pan:function(t,e,n){var i;this.options.disablePan||(i=(i=(n=n||{}).matrix)||this.getMatrix(),n.relative&&(t+=+i[4],e+=+i[5]),i[4]=t,i[5]=e,this.setMatrix(i,n),n.silent||this._trigger("pan",i[4],i[5]))},zoom:function(t,e){"object"==typeof t?(e=t,t=null):e=e||{};var n,i,s,o,a,r,h,c,l=x.extend({},this.options,e);l.disableZoom||(n=!1,r=+(i=l.matrix||this.getMatrix())[0],"number"!=typeof t&&(t=l.exponential&&1<=r-l.increment?Math[t?"sqrt":"pow"](r,2):r+l.increment*(t?-1:1),n=!0),t>l.maxScale?t=l.maxScale:t<l.minScale&&(t=l.minScale),(h=l.focal)&&!l.disablePan&&(this.resetDimensions(),a=l.dims=this.dimensions,s=h.clientX,o=h.clientY,this.isSVG||(s-=a.width/r/2,o-=a.height/r/2),c=new u(s,o,1),e=new m(i),a=new m(1,0,(h=this.parentOffset||this.$parent.offset()).left-this.$doc.scrollLeft(),0,1,h.top-this.$doc.scrollTop()),r=e.inverse().x(a.inverse().x(c)),h=t/i[0],e=e.x(new m([h,0,0,h,0,0])),c=a.x(e.x(r)),i[4]=+i[4]+(s-c.e(0)),i[5]=+i[5]+(o-c.e(1))),i[0]=t,i[3]="number"==typeof l.dValue?l.dValue:t,this.setMatrix(i,{animate:void 0!==l.animate?l.animate:n,range:!l.noSetRange}),l.silent||this._trigger("zoom",i[0],l))},option:function(t,e){var n;if(!t)return x.extend({},this.options);if("string"==typeof t){if(1===arguments.length)return void 0!==this.options[t]?this.options[t]:null;(n={})[t]=e}else n=t;this._setOptions(n)},_setOptions:function(t){x.each(t,x.proxy(function(t,e){switch(t){case"disablePan":case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}switch(this.options[t]=e,t){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[t]=e;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":x.style(this.elem,"cursor",e);break;case"minScale":this.$zoomRange.attr("min",e);break;case"maxScale":this.$zoomRange.attr("max",e);break;case"rangeStep":this.$zoomRange.attr("step",e);break;case"startTransform":this._buildTransform();break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"panOnlyWhenZoomed":this._checkPanWhenZoomed();break;case"$set":e instanceof x&&e.length&&(this.$set=e,this._initStyle(),this._buildTransform())}},this))},_checkPanWhenZoomed:function(t){var e=this.options;e.panOnlyWhenZoomed&&(t=(t=t||this.getMatrix()[0])<=e.minScale,e.disablePan!==t&&this.option("disablePan",t))},_initStyle:function(){var t={"transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(t.cursor=this.options.cursor),this.$set.css(t);var e=this.$parent;e.length&&!x.nodeName(this.parent,"body")&&(t={overflow:"hidden"},"static"===e.css("position")&&(t.position="relative"),e.css(t))},_resetStyle:function(){this.$elem.css({cursor:"",transition:""}),this.$parent.css({overflow:"",position:""})},_bind:function(){var n=this,i=this.options,e=i.eventNamespace,t="mousedown"+e+" MSPointerDown"+e,s="touchstart"+e+" "+t,o="touchend"+e+" click"+e+" MSPointerUp"+e,a={},r=this.$reset,h=this.$zoomRange;x.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var t=i["on"+this];x.isFunction(t)&&(a["panzoom"+this.toLowerCase()+e]=t)}),i.disablePan&&i.disableZoom||(a[s]=function(t){var e;("touchstart"===t.type?!(e=t.touches||t.originalEvent.touches)||(1!==e.length||i.disablePan)&&2!==e.length:i.disablePan||(t.which||t.originalEvent.which)!==i.which)||(t.preventDefault(),t.stopPropagation(),n._startMove(t,e))},3===i.which&&(a.contextmenu=!1)),this.$elem.on(a),r.length&&r.on(o,function(t){t.preventDefault(),n.reset()}),h.length&&h.attr({step:i.rangeStep===l.defaults.rangeStep&&h.attr("step")||i.rangeStep,min:i.minScale,max:i.maxScale}).prop({value:this.getMatrix()[0]}),i.disableZoom||(s=this.$zoomIn,r=this.$zoomOut,s.length&&r.length&&(s.on(o,function(t){t.preventDefault(),n.zoom()}),r.on(o,function(t){t.preventDefault(),n.zoom(!0)})),h.length&&((a={})[t]=function(){n.transition(!0)},a[(c?"input":"change")+e]=function(){n.zoom(+this.value,{noSetRange:!0})},h.on(a)))},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){var t;this._transform&&(t=this.options,this._transition=this._transform+" "+t.duration+"ms "+t.easing)},_getDistance:function(t){var e=t[0],t=t[1];return Math.sqrt(Math.pow(Math.abs(t.clientX-e.clientX),2)+Math.pow(Math.abs(t.clientY-e.clientY),2))},_getMiddle:function(t){var e=t[0],t=t[1];return{clientX:(t.clientX-e.clientX)/2+e.clientX,clientY:(t.clientY-e.clientY)/2+e.clientY}},_trigger:function(t){"string"==typeof t&&(t="panzoom"+t),this.$elem.triggerHandler(t,[this].concat(a.call(arguments,1)))},_startMove:function(t,i){var e,s,o,a,r,h,n,c,l,m,u,f,p,d,g,v,b;this.panning||(l=(c=this).options,m=l.eventNamespace,u=this.getMatrix(),f=u.slice(0),p=+f[4],d=+f[5],g={matrix:u,animate:"skip"},v="pointerdown"===(v=t.type)?(e="pointermove","pointerup"):"touchstart"===v?(e="touchmove","touchend"):"MSPointerDown"===v?(e="MSPointerMove","MSPointerUp"):(e="mousemove","mouseup"),e+=m,v+=m,this.transition(!0),this.panning=!0,this._trigger("start",t,i),(b=function(t,e){t=t.originalEvent;if(e){if(2===e.length)return null!=s?void 0:(s=c._getDistance(e),o=+u[0],void(a=c._getMiddle(e)));if(null!=r)return;(n=e[0])&&(r=n.pageX,h=n.pageY)}null==r&&(r=t.pageX,h=t.pageY)})(t,i),x(_).off(m).on(e,function(t){if(t.preventDefault(),i=t.touches||t.originalEvent.touches,b(t,i),i){if(2===i.length){var e=c._getMiddle(i),n=c._getDistance(i)-s;return c.zoom(n*(l.increment/100)+o,{focal:e,matrix:u,animate:"skip"}),c.pan(+u[4]+e.clientX-a.clientX,+u[5]+e.clientY-a.clientY,g),void(a=e)}e=i[0]||{pageX:0,pageY:0}}e=e||t.originalEvent,c.pan(p+e.pageX-r,d+e.pageY-h,g)}).on(v,function(t){t.preventDefault(),x(this).off(m),c.panning=!1,t.type="panzoomend",c._trigger(t,u,!function(t,e){for(var n=t.length;--n;)if(Math.round(+t[n])!==Math.round(+e[n]))return;return 1}(u,f))}))}},x.Panzoom=l,x.fn.panzoom=function(t){var e,n,i,s;return"string"==typeof t?(s=[],n=a.call(arguments,1),this.each(function(){(e=x.data(this,o))?"_"!==t.charAt(0)&&"function"==typeof(i=e[t])&&void 0!==(i=i.apply(e,n))&&s.push(i):s.push(void 0)}),s.length?1===s.length?s[0]:s:this):this.each(function(){new l(this,t)})},l});
 //# sourceMappingURL=maps/panzoom.min.js.map
 